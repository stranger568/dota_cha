if Econ == nil then Econ = class({}) end

Econ.vParticleMap ={

    green={"particles/econ/courier/courier_greevil_green/courier_greevil_green_ambient_3.vpcf"},
    lava_trail={"particles/econ/courier/courier_trail_lava/courier_trail_lava.vpcf"},
    paltinum_baby_roshan={"particles/econ/paltinum_baby_roshan/paltinum_baby_roshan.vpcf"},
    legion_wings={"particles/econ/legion_wings/legion_wings.vpcf"},
    legion_wings_vip={"particles/econ/legion_wings/legion_wings_vip.vpcf"},
    legion_wings_pink={"particles/econ/legion_wings/legion_wings_pink.vpcf"},
    darkmoon={"particles/econ/courier/courier_roshan_darkmoon/courier_roshan_darkmoon.vpcf"},
    ethereal_flame_white={"particles/econ/ethereal_flame.vpcf"},
    ethereal_flame_golden={"particles/econ/ethereal_flame.vpcf"},
    ethereal_flame_pink={"particles/econ/ethereal_flame.vpcf"},
    sakura_trail={"particles/econ/courier/courier_axolotl_ambient/courier_axolotl_ambient.vpcf","particles/econ/sakura_trail.vpcf"},
    golden_ti7={"particles/econ/golden_ti7.vpcf"},
    rich={"particles/econ/rich.vpcf"},
    water_curtain={"particles/econ/items/necrolyte/necro_ti9_immortal/necro_ti9_immortal_ambient.vpcf"},
    
    rainbow_tail={"particles/econ/items/dazzle/dazzle_ti6_gold/dazzle_ti6_shallow_grave_gold_ground_ray.vpcf","particles/econ/items/dazzle/dazzle_ti6_gold/dazzle_ti6_shallow_grave_gold_ground_ring.vpcf","particles/econ/items/dazzle/dazzle_ti6_gold/dazzle_ti6_shallow_grave_gold_ground_steam.vpcf","particles/econ/items/dazzle/dazzle_ti6_gold/dazzle_ti6_shallow_grave_gold_glyph.vpcf"},
    golden_lotus={"particles/econ/events/golden_lotus_effect.vpcf"},
    sand={"particles/econ/courier/courier_roshan_desert_sands/baby_roshan_desert_sands_ambient_flying.vpcf"},
    frost={"particles/econ/courier/courier_roshan_frost/courier_roshan_frost_ambient.vpcf"},
    orbit={"particles/econ/courier/courier_trail_orbit/courier_trail_orbit.vpcf"},
    spark_ti6={"particles/econ/events/ti6/radiance_owner_ti6.vpcf"},
    douyu_1={"particles/econ/douyu_1.vpcf"},
    douyu_2={"particles/econ/douyu_2.vpcf"},
    douyu_3={"particles/econ/douyu_3.vpcf"},
    
    season_2020_3={"effect/ti7_shengwu/ti7.vpcf"},
    legend_three_star_chess={"effect/arrow/5/star3.vpcf"},
    epic_three_star_chess={"effect/arrow/4/star3.vpcf"},
    rare_three_star_chess={"effect/arrow/3/star3.vpcf"},
    nightmare={"effect/emengchanrao/1.vpcf"},
    blood_dance={"effect/xuehuan/xuehuanecon/items/bloodseeker/bloodseeker_eztzhok_weapon/bloodseeker_bloodrage_ground_eztzhok.vpcf"},
    radiance={"effect/xiexiaowo_guanjundun/1.vpcf"},
    music={"effect/music/1.vpcf"},
    league_dog_wing={"effect/liansai_dog/1.vpcf"},
    league_dog_ring={"effect/liansai_dog2/1.vpcf"},
    star_fire={"effect/yuhuofenshen/1_2.vpcf"},
    purple_cloud={"effect/zisexingyun_2/ti7secondary.vpcf"},
    jade={"particles/econ/courier/courier_roshan_ti8/courier_roshan_ti8.vpcf"},
    butterfly={"particles/econ/items/natures_prophet/natures_prophet_ti9_immortal/natures_prophet_ti9_wrath_butterflies_start.vpcf"},
    firefly={"particles/econ/items/pangolier/pangolier_ti9_cache/pangolier_ti9_cache_shoulder_ambient.vpcf"},
    shadow_word={"particles/econ/items/warlock/warlock_ti9/warlock_ti9_shadow_word_debuff.vpcf"},
    last_word={"particles/units/heroes/hero_silencer/silencer_last_word_status.vpcf"},  
    repel_buff={"particles/econ/items/omniknight/omni_ti8_head/omniknight_repel_buff_ti8_flash.vpcf","particles/econ/items/omniknight/omni_ti8_head/omniknight_repel_buff_ti8_glyph.vpcf","particles/econ/items/omniknight/omni_ti8_head/omniknight_repel_buff_ti8_swoosh.vpcf","particles/econ/items/omniknight/omni_ti8_head/omniknight_repel_buff_ti8_swoosh_b.vpcf","particles/econ/items/omniknight/omni_ti8_head/omniknight_repel_buff_ti8_rings.vpcf"},  
    out_world={"particles/econ/items/outworld_devourer/od_ti8/od_ti8_ambient.vpcf"},  
    galaxy_core={"particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_flare_c.vpcf","particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_ring_spiral.vpcf","particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_nebula.vpcf","particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_ember_streak.vpcf","particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_ember.vpcf","particles/econ/items/enigma/enigma_world_chasm/enigma_blackhole_ti5_core_glow.vpcf"},  
    
    douyu_new_1={"particles/econ/dy_new_1.vpcf"},
    douyu_new_2={"particles/econ/dy_new_2.vpcf"},
    douyu_new_3={"particles/econ/dy_new_3.vpcf"},
    season_2020_4={"particles/econ/events/ti8/ti8_hero_effect.vpcf"},
    season_2020_5={"effect/arrow/ssr/star1.vpcf"},
    season_2020_6={"particles/econ/events/ti9/ti9_emblem_effect.vpcf"},
    season_2020_7={"particles/econ/events/ti10/emblem/ti10_emblem_effect.vpcf"},
    season_2020_8={"effect/arrow/2/star3.vpcf"},



    
    
    curlnoise={"particles/dev/curlnoise_test.vpcf"},
    
    ti7_donkey={"particles/econ/courier/courier_donkey_ti7/courier_donkey_ti7_ambient.vpcf"},
    
    slumber={"particles/econ/items/bane/slumbering_terror/bane_slumber_nightmare.vpcf"},
    
    ti9_army={"particles/econ/items/clinkz/clinkz_ti9_immortal/clinkz_ti9_summon_army.vpcf"},
    
    rose={"particles/econ/items/dark_willow/dark_willow_chakram_immortal/dark_willow_chakram_immortal_bramble.vpcf"},
    
    shallow_grave={"particles/econ/items/dazzle/dazzle_ti6/dazzle_ti6_shallow_grave_ground_ray.vpcf","particles/econ/items/dazzle/dazzle_ti6/dazzle_ti6_shallow_grave_ground_ring.vpcf","particles/econ/items/dazzle/dazzle_ti6/dazzle_ti6_shallow_grave_ground_steam.vpcf","particles/econ/items/dazzle/dazzle_ti6/dazzle_ti6_shallow_grave_glyph.vpcf"},
    
    thunder_strike={"particles/econ/items/disruptor/disruptor_ti8_immortal_weapon/disruptor_ti8_immortal_thunder_strike_buff.vpcf"},
    
    legion_fallen = {"particles/econ/items/legion/legion_fallen/legion_fallen_press_owner_alt.vpcf"},
    
    open_wounds = {"particles/econ/items/lifestealer/ls_ti9_immortal/ls_ti9_open_wounds_swoop_parent.vpcf"},
    
    bewitching_flame = {"particles/econ/items/lina/lina_bewitching_flame/lina_bewitching_flame_ambient.vpcf"},
    
    death_finger = {"particles/econ/items/lion/lion_ti8/lion_spell_finger_of_death_overhead_ti8.vpcf"},
    
    mirana_leap = {"particles/econ/items/mirana/mirana_ti8_immortal_mount/mirana_ti8_immortal_leap_trail.vpcf"},
    
    crown = {"effect/crown/2.vpcf"},
    
    crown_feather = {"effect/crown_s2/2.vpcf"},
    
    nihility = {"particles/econ/items/nightstalker/nightstalker_black_nihility/nightstalker_black_nihility_void.vpcf"},
    
    manticore = {"particles/econ/items/skywrath_mage/manticore/wings_of_the_manticore_ambientfx.vpcf"},
    
    spectral_dagger = {"particles/econ/items/spectre/spectre_transversant_soul/spectre_transversant_spectral_dagger_path_owner.vpcf"},
    
    shrine_active = {"particles/world_shrine/radiant_shrine_active.vpcf"},
    
    nightstalker_gold ={"particles/econ/items/nightstalker/nightstalker_ti10_silence/nightstalker_ti10_gold.vpcf"},
    
    nightstalker_black ={"particles/econ/items/nightstalker/nightstalker_ti10_silence/nightstalker_ti10.vpcf"},
    
    fish ={"particles/econ/items/slardar/slardar_ti10_head/slardar_ti10_amp_damage.vpcf"},
    
    golden_fish ={"particles/econ/items/slardar/slardar_ti10_head/slardar_ti10_gold_amp_damage.vpcf"},
    
    windranger_arcana ={"particles/econ/items/windrunner/windranger_arcana/windranger_arcana_debut_ambient.vpcf"},
    season_2020_9 ={"effect/bingnv/ambient.vpcf"},
    season_2020_10 ={"effect/liansai_dog2/1_base_b.vpcf"},
    halloween_2020 = {"particles/econ/events/diretide_2020/emblem/fall20_emblem_v1_effect.vpcf"},
    season_2020_11 = {"effect/emengchanrao/1_ring_mist.vpcf"},
    
    season_2020_12={"effect/arrow/1/star3.vpcf"},

    
    
    halloween_yellow = {"particles/econ/events/diretide_2020/emblem/fall20_emblem_effect.vpcf"},
    halloween_red = {"particles/econ/events/diretide_2020/emblem/fall20_emblem_v2_effect.vpcf"},
    halloween_blue = {"particles/econ/events/diretide_2020/emblem/fall20_emblem_v3_effect.vpcf"},
    ti6_fountain = {"particles/cosmetic/auras/fountain_effect_ti6/fountain_effect_ti6.vpcf"},
    ti7_fountain = {"particles/cosmetic/auras/fountain_effect_ti7/fountain_effect_ti7.vpcf"},
    ti8_fountain = {"particles/cosmetic/auras/fountain_effect_ti8/fountain_effect_ti8.vpcf"},
    ti9_fountain = {"particles/cosmetic/auras/fountain_effect_ti9/fountain_effect_ti9.vpcf"},
    new_bloom_particle = {"particles/cosmetic/auras/newbloom/newbloom.vpcf"},

    
    season_2021_1 = {"particles/cosmetic/auras/test_aura_1_sup1/test_aura_1_sup1.vpcf"},
    season_2021_2 = {"particles/cosmetic/auras/test_aura_2_mmr1700/creature/test_aura_2_mmr1700.vpcf"},
    season_2021_3 = {"particles/cosmetic/auras/test_aura_3_treasure/test_aura_3_treasure.vpcf"},
    season_2021_4 = {"particles/cosmetic/auras/test_aura_4_sup2/test_aura_4_sup2.vpcf"},
    season_2022_1 = {"particles/econ/courier/courier_ti10/courier_ti10_lvl4_ambient_fly.vpcf"},
}

Econ.vKillEffectMap ={
    sf_wings="particles/econ/items/shadow_fiend/sf_fire_arcana/sf_fire_arcana_wings.vpcf",
    huaji="particles/econ/kill_mark/huaji.vpcf",
    jibururen_mark="particles/econ/kill_mark/jibururen_mark.vpcf",
    question_mark="particles/econ/kill_mark/question_mark.vpcf",
    
    rainbow="particles/econ/items/tuskarr/tusk_ti9_immortal/tusk_ti9_walruspunch_txt_ult.vpcf",
    wudizhansha="particles/econ/items/juggernaut/jugg_arcana/juggernaut_arcana_counter.vpcf",
    miedi="particles/econ/items/techies/techies_arcana/techies_suicide_kills_arcana.vpcf",
    purple_fireworks="effect/winaround/1/shovel_baby_roshan_spawn.vpcf",
    
    
    wraith_king="particles/econ/items/wraith_king/wraith_king_arcana/wk_arc_reincarn.vpcf",
    
    greevil_death="particles/units/unit_greevil/loot_greevil_death.vpcf",

    
    
    blue_whirl="particles/cosmetic/kill_effects/blue_whirl/blue_whirl.vpcf",
    
    avowance="particles/cosmetic/kill_effects/avowance/avowance.vpcf",
    
    diretide_bats="particles/cosmetic/kill_effects/diretide_bats/diretide_bats.vpcf",
    
    midnight_pulse="particles/cosmetic/kill_effects/midnight_pulse/midnight_pulse.vpcf",
    
    raze="particles/cosmetic/kill_effects/raze/raze.vpcf",
    
    snow="particles/cosmetic/kill_effects/snow/snow.vpcf",
    
    sparkles="particles/cosmetic/kill_effects/sparkles/sparkles.vpcf",

    

    
    bear_cry_spray="particles/sprays/chc_bear_cry.vpcf",
    diretide_apple_spray = "particles/sprays/chc_diretide_apple.vpcf",
    diretide_boo_spray = "particles/sprays/chc_diretide_boo.vpcf",
    diretide_brood_spray = "particles/sprays/chc_diretide_brood.vpcf",
    diretide_bs_spray = "particles/sprays/chc_diretide_bs.vpcf",
    diretide_cat_spray = "particles/sprays/chc_diretide_cat.vpcf",
    diretide_dp_spray = "particles/sprays/chc_diretide_dp.vpcf",
    diretide_gummy_spray = "particles/sprays/chc_diretide_gummy.vpcf",
    diretide_lycan_spray = "particles/sprays/chc_diretide_lycan.vpcf",
    diretide_roshan_spray = "particles/sprays/chc_diretide_roshan.vpcf",
    diretide_taffy_spray = "particles/sprays/chc_diretide_taffy.vpcf",
    furbolg_highfive_spray = "particles/sprays/chc_furbolg_highfive.vpcf",
    
    
    ez_spray = "particles/sprays/chc_ez.vpcf",
    based_spray = "particles/sprays/chc_based.vpcf",
    kekw_spray = "particles/sprays/chc_kekw.vpcf",
    kekwait_spray= "particles/sprays/chc_kekwait.vpcf",
    monkas_spray = "particles/sprays/chc_monkas.vpcf",
    omegalul_spray = "particles/sprays/chc_omegalul.vpcf",
    pogu_spray = "particles/sprays/chc_pogu.vpcf",
    roflan_spray = "particles/sprays/chc_roflan.vpcf",
    
    
    invoker_smart_spray = "particles/sprays/chc_invoker_smart.vpcf",
    liltree_happy_spray= "particles/sprays/chc_liltree_happy.vpcf",
    liltree_sad_spray = "particles/sprays/chc_liltree_sad.vpcf",
    lina_angry_spray= "particles/sprays/chc_lina_angry.vpcf",
    lion_xd_spray = "particles/sprays/chc_lion_xd.vpcf",
    mirana_shh_spray = "particles/sprays/chc_mirana_shh.vpcf",
    monkey_zen_spray = "particles/sprays/chc_monkey_zen.vpcf",
    monkeyking_monkeychamp_spray = "particles/sprays/chc_monkeyking_monkeychamp.vpcf",
    naturesprophet_o_o_spray = "particles/sprays/chc_naturesprophet_o_o.vpcf",
    pudge_nailedit_spray = "particles/sprays/chc_pudge_nailedit.vpcf",
    sf_shrug_spray = "particles/sprays/chc_sf_shrug.vpcf",
    shaker_confus_spray = "particles/sprays/chc_shaker_confus.vpcf",

    
    ti10_chicken_spray = "particles/sprays/chc_ti10_chicken.vpcf",
    ti10_darkwillow_wow_spray = "particles/sprays/chc_ti10_darkwillow_wow.vpcf",
    ti10_grimstroke_happytree_spray = "particles/sprays/chc_ti10_grimstroke_happytree.vpcf",
    ti10_invoker_sunstrike_spray = "particles/sprays/chc_ti10_invoker_sunstrike.vpcf",
    ti10_jakiro_spray = "particles/sprays/chc_ti10_jakiro.vpcf",
    ti10_jugg_spray = "particles/sprays/chc_ti10_jugg.vpcf",
    ti10_kotl_mana_spray = "particles/sprays/chc_ti10_kotl_mana.vpcf",
    ti10_mars_fightme_spray = "particles/sprays/chc_ti10_mars_fightme.vpcf",
    ti10_morphling_spray = "particles/sprays/chc_ti10_morphling.vpcf",
    ti10_np_popcorn_spray = "particles/sprays/chc_ti10_np_popcorn.vpcf",
    ti10_ogre_think_spray = "particles/sprays/chc_ti10_ogre_think.vpcf",
    ti10_roshan_cheese_spray = "particles/sprays/chc_ti10_roshan_cheese.vpcf",
    ti10_rubick_spray  = "particles/sprays/chc_ti10_rubick.vpcf",
    ti10_snapfire_cookie_spray = "particles/sprays/chc_ti10_snapfire_cookie.vpcf",
    ti10_sven_spray = "particles/sprays/chc_ti10_sven.vpcf",
    ti10_techies_barrel_spray = "particles/sprays/chc_ti10_techies_barrel.vpcf",
    ti10_troll_loser_spray = "particles/sprays/chc_ti10_troll_loser.vpcf",
    ti10_undying_rip_spray = "particles/sprays/chc_ti10_undying_rip.vpcf",
    ti10_wisp_strong_spray = "particles/sprays/chc_ti10_wisp_strong.vpcf",
    ti10_wraithking_cdi_spray = "particles/sprays/chc_ti10_wraithking_cdi.vpcf",

    
    ti9_aa_icecream_spray ="particles/sprays/chc_ti9_aa_icecream.vpcf",
    ti9_bountyhunter_riches_spray = "particles/sprays/chc_ti9_bountyhunter_riches.vpcf",
    ti9_earthshaker_dunk_spray = "particles/sprays/chc_ti9_earthshaker_dunk.vpcf",
    ti9_legioncommander_loser_spray = "particles/sprays/chc_ti9_legioncommander_loser.vpcf",
    ti9_legioncommander_winner_spray = "particles/sprays/chc_ti9_legioncommander_winner.vpcf",
    ti9_lion_zap_spray = "particles/sprays/chc_ti9_lion_zap.vpcf",
    ti9_meepo_dirt_nap_spray = "particles/sprays/chc_ti9_meepo_dirt_nap.vpcf",
    ti9_monkeyking_bananaphone_spray = "particles/sprays/chc_ti9_monkeyking_bananaphone.vpcf",
    ti9_phoenix_eggy_spray = "particles/sprays/chc_ti9_phoenix_eggy.vpcf",
    ti9_puck_dagoned_spray = "particles/sprays/chc_ti9_puck_dagoned.vpcf",
    ti9_pugna_magic_spray = "particles/sprays/chc_ti9_pugna_magic.vpcf",
    ti9_riki_hidden_spray = "particles/sprays/chc_ti9_riki_hidden.vpcf",
    ti9_skywrath_dunno_spray = "particles/sprays/chc_ti9_skywrath_dunno.vpcf",
    ti9_spiritbreaker_choochoo_spray = "particles/sprays/chc_ti9_spiritbreaker_choochoo.vpcf",
    ti9_sven_strength_spray = "particles/sprays/chc_ti9_sven_strength.vpcf",
    ti9_tusk_snowball_spray = "particles/sprays/chc_ti9_tusk_snowball.vpcf",
    ti9_ursa_funny_bear_spray = "particles/sprays/chc_ti9_ursa_funny_bear.vpcf",
    ti9_wyvern_kiss_spray = "particles/sprays/chc_ti9_wyvern_kiss.vpcf",
    ti9_zeus_jump_spray = "particles/sprays/chc_ti9_zeus_jump.vpcf",
    tide_thumbsup_spray = "particles/sprays/chc_tide_thumbsup.vpcf",

    
    black_question_spray = "particles/sprays/chc_black_question.vpcf",
    doge_spray = "particles/sprays/chc_doge.vpcf",
    mur_cat_spray = "particles/sprays/chc_mur_cat.vpcf",
    mushroom_head_spray = "particles/sprays/chc_mushroom_head.vpcf",
    panda_head_spray = "particles/sprays/chc_panda_head.vpcf",
    tibetan_fox_spray = "particles/sprays/chc_tibetan_fox.vpcf",
    
    
    fake_smile_spray = "particles/sprays/chc_fake_smile.vpcf",
    hao_zi_wei_zhi_spray = "particles/sprays/chc_hao_zi_wei_zhi.vpcf",
    hard_on_eyes_spray = "particles/sprays/chc_hard_on_eyes.vpcf",
    joker_spray = "particles/sprays/chc_joker.vpcf",
    nothing_worthy_spray = "particles/sprays/chc_nothing_worthy.vpcf",
    zhen_xiang_spray =  "particles/sprays/chc_zhen_xiang.vpcf"
}



Econ.vCosmeticsAbilityMap ={
  seasonal_ti9_banner = "seasonal_ti9_banner",
  seasonal_summon_cny_balloon = "seasonal_summon_cny_balloon",
  seasonal_summon_dragon = "seasonal_summon_dragon",
  seasonal_summon_cny_tree = "seasonal_summon_cny_tree",
  seasonal_firecrackers = "seasonal_firecrackers",
  seasonal_throw_snowball = "seasonal_throw_snowball",
  seasonal_summon_snowman = "seasonal_summon_snowman",
  seasonal_decorate_tree = "seasonal_decorate_tree",
  seasonal_festive_firework = "seasonal_festive_firework",
  seasonal_ti9_shovel = "seasonal_ti9_shovel",
  seasonal_ti9_instruments = "seasonal_ti9_instruments",
  seasonal_ti9_monkey = "seasonal_ti9_monkey",
  seasonal_summon_ti9_balloon = "seasonal_summon_ti9_balloon",
  high_five_custom = "high_five_custom",
  seasonal_ti10_disco_ball = "seasonal_ti10_disco_ball",
  seasonal_ti10_guild_banner = "seasonal_ti10_guild_banner",
  seasonal_ti10_portal = "seasonal_ti10_portal",
  seasonal_ti10_soccer_ball = "seasonal_ti10_soccer_ball",
  seasonal_ti10_hot_potato = "seasonal_ti10_hot_potato",
  seasonal_ti10_hot_potato_throw_existing_potato = "seasonal_ti10_hot_potato_throw_existing_potato",
  seasonal_summon_penguin = "seasonal_summon_penguin"
}



Econ.vKillSoundMap ={
    bai_tuo_shei_qu="soundboard.bai_tuo_shei_qu",
    duiyou_ne="soundboard.duiyou_ne",
    ni_qi_bu_qi="soundboard.ni_qi_bu_qi",
    liu_liu_liu="soundboard.liu_liu_liu",
    ta_daaaa="soundboard.ta_daaaa",
    zou_hao_bu_song="soundboard.zou_hao_bu_song",
    zai_jian_le_bao_bei="soundboard.zai_jian_le_bao_bei",
    gan_ma_ne_xiong_di="soundboard.gan_ma_ne_xiong_di",
    lian_dou_xiu_wai_la="soundboard.lian_dou_xiu_wai_la",
    wan_bu_liao_la="soundboard.wan_bu_liao_la",
    gao_fu_shuai="soundboard.gao_fu_shuai",
    piao_liang="soundboard.piao_liang",
    oyoy="soundboard.oy_oy_oy",
    next_level_play="soundboard.next_level",
    ceb="soundboard.echo_slama_jama",
    ding_ding_ding="soundboard.ding_ding",

    
    
    wo_shi_yi="soundboard.wo_shi_yi",
    
    ni_xing_ni="soundboard.ni_xing_ni",
    
    hui_tian_mie="soundboard.hui_tian_mie",
    
    lai_ni_da="soundboard.lai_ni_da",
    
    tiao_zou_le="soundboard.tiao_zou_le",
    
    ay_ay_ay_cn="soundboard.ay_ay_ay_cn",
    
    what_the_f="soundboard.what_the_f_just_happened",
    
    nothing_stop="soundboard.nothing_that_can_stop_this_man"

}


Econ.vStartBlinkEffectMap ={
    ti10_blink="particles/econ/events/ti10/blink_dagger_start_ti10.vpcf",
    ti9_blink="particles/econ/events/ti9/blink_dagger_ti9_start_lvl2.vpcf",
    ti8_blink="particles/econ/events/ti8/blink_dagger_ti8_start_lvl2.vpcf",
    ti7_blink="particles/econ/events/ti7/blink_dagger_start_ti7_lvl2.vpcf",
    ti6_blink="particles/econ/events/ti6/blink_dagger_start_ti6_lvl2.vpcf",
    ti5_blink="particles/econ/events/ti5/blink_dagger_start_lvl2_ti5.vpcf",
    ti4_blink="particles/econ/events/ti4/blink_dagger_start_ti4.vpcf",
}


Econ.vEndBlinkEffectMap ={
    ti10_blink="particles/econ/events/ti10/blink_dagger_end_ti10.vpcf",
    ti9_blink="particles/econ/events/ti9/blink_dagger_ti9_lvl2_end.vpcf",
    ti8_blink="particles/econ/events/ti8/blink_dagger_ti8_end_lvl2.vpcf",
    ti7_blink="particles/econ/events/ti7/blink_dagger_end_ti7_lvl2.vpcf",
    ti6_blink="particles/econ/events/ti6/blink_dagger_end_ti6_lvl2.vpcf",
    ti5_blink="particles/econ/events/ti5/blink_dagger_end_lvl2_ti5.vpcf",
    ti4_blink="particles/econ/events/ti4/blink_dagger_end_ti4.vpcf",
}

Econ.vAttackEffectMap ={
    ti10_attack="particles/econ/events/ti10/attack_modifier_ti10.vpcf",
    ti9_attack="particles/econ/attack/attack_modifier_ti9.vpcf",
    coconut ="particles/econ/items/witch_doctor/wd_monkey/witchdoctor_cask_monkey.vpcf",
    durian="particles/econ/items/witch_doctor/wd_ti8_immortal_bonkers/wd_ti8_immortal_bonkers_cask.vpcf",
    desolation_fire="particles/econ/items/shadow_fiend/sf_desolation/sf_base_attack_desolation_fire_arcana.vpcf",
    gift="particles/winter_fx/winter_present_projectile.vpcf",
    virgas="particles/econ/items/enchantress/enchantress_virgas/ench_impetus_virgas.vpcf",
    
    
    necronub="particles/econ/items/necrolyte/necronub_base_attack/necrolyte_base_attack_ka.vpcf",
    
    radiant_rock="particles/econ/world/towers/rock_golem/radiant_rock_golem_attack.vpcf",
    
    dire_rock="particles/econ/world/towers/rock_golem/dire_rock_golem_attack.vpcf",   
    
    radiant_fire ="particles/econ/world/towers/ti10_radiant_tower/ti10_radiant_tower_attack.vpcf",
    
    dire_fire ="particles/econ/world/towers/ti10_dire_tower/ti10_dire_tower_attack.vpcf",
}


Econ.vWearableMap={
   
   
   terror_wings="models/items/terrorblade/terrorblade_ti8_immortal_back/terrorblade_ti8_immortal_back.vmdl",
   
   skywrath_wings="models/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_ti9_immortal_back.vmdl",
   
   skywrath_wings_red="models/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_ti9_immortal_back.vmdl",
   
   skywrath_wings_golden="models/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_ti9_immortal_back.vmdl",
   
   pudge_arcana="models/items/pudge/arcana/pudge_arcana_back.vmdl",
   
   qop_red_wings="models/items/queenofpain/queenofpain_arcana/queenofpain_arcana_modest_wings.vmdl",
   
   shadow_fiend_wings="models/heroes/shadow_fiend/arcana_wings.vmdl",
   
   jugg_mask="models/items/juggernaut/arcana/juggernaut_arcana_mask.vmdl",
   
   veno_head="models/items/venomancer/veno_ti8_immortal_head/veno_ti8_immortal_head.vmdl",
   
   guns="models/items/gyrocopter/immortal_guns/immortal_guns.vmdl",
   
   spectre="models/items/spectre/immortal_shoulders/immortal_shoulders.vmdl",
   
   spectre_red="models/items/spectre/immortal_shoulders/immortal_shoulders.vmdl",
   
   dragon_wings="models/items/dragon_knight/dragon_immortal_1/dragon_immortal_fx.vmdl",
   
   lifestealer_rage="models/items/lifestealer/immortal_back/lifestealer_immortal_back_rage.vmdl",
   
   slardar_back="models/items/slardar/slardar_ti9_immortal_back/slardar_ti9_immortal_back.vmdl",
   
   naga_tail="models/items/siren/naga_ti8_immortal_tail/naga_ti8_immortal_tail.vmdl",
   
   pudge_arm="models/items/pudge/immortal_arm/immortal_arm.vmdl",
   
   pudge_arm_gold="models/items/pudge/immortal_arm/immortal_arm.vmdl",
   
   furion_back="models/items/furion/np_ti9_immortal_back/np_ti9_immortal_back.vmdl",
   
   tinker_laser="models/items/tinker/tinker_ti10_immortal_laser/tinker_ti10_immortal_laser.vmdl",
   
   treant ="models/items/treant/immortal_shoulder/treant_ti7_immortal_shoulder.vmdl",
   
   weaver ="models/items/weaver/weaver_immortal_head_ti7/weaver_immortal_head_ti7.vmdl",
   
   weaver_golden ="models/items/weaver/weaver_immortal_head_ti7/weaver_immortal_head_ti7.vmdl",
   
   winter_2020 ="models/items/furion/hat_holiday_1.vmdl",
}



Econ.vWearableAnimation ={
   terror_wings="terrorblade_ti8_immortal_back_idle",
   skywrath_wings="skywrath_ti9_idle_aggressive",
   skywrath_wings_red="skywrath_ti9_idle_aggressive",
   skywrath_wings_golden="skywrath_ti9_idle_aggressive",
   pudge_arcana="bindPose",
   qop_red_wings="bindPose",
   shadow_fiend_wings="bindPose",
   jugg_mask="juggernaut_arcana_mask_idle",
   veno_head="idle_anim",
   guns="",
   dragon="idle",
   spectre="spectre_immortal_shoulders_idle",
   spectre_red="spectre_immortal_shoulders_idle",
   dragon_wings="dragon_idle",
   lifestealer_rage="run_anim",
   slardar_back="ti9_idle",
   naga_tail="ti8_siren_idle",
   pudge_arm="immortal_arm_gnawing_idle",
   pudge_arm_gold="immortal_arm_gnawing_idle",
   furion_back="idle_test_for_reference",
   tinker_laser="idle_anim",
   treant="idle_seedlings",
   weaver ="weaver_ti7_immortal_head_idle",
   weaver_golden ="weaver_ti7_immortal_head_idle",
   winter_2020 =""
}


Econ.vWearableParticle ={
    terror_wings={"particles/econ/items/terrorblade/terrorblade_back_ti8/terrorblade_back_ambient_ti8.vpcf"},
    skywrath_wings={"particles/econ/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_mage_ti9_ambient.vpcf"},
    skywrath_wings_red={"particles/econ/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_mage_ti9_crimson_ambient.vpcf"},
    skywrath_wings_golden={"particles/econ/items/skywrath_mage/skywrath_ti9_immortal_back/skywrath_mage_ti9_golden_ambient.vpcf"},
    pudge_arcana={"particles/econ/items/pudge/pudge_arcana/pudge_arcana_red_back_ambient.vpcf"},
    qop_red_wings ={"particles/econ/items/queen_of_pain/qop_arcana/qop_arcana_wings_ambient.vpcf"},
    shadow_fiend_wings ={"particles/econ/items/shadow_fiend/sf_fire_arcana/sf_fire_arcana_ambient.vpcf"},
    jugg_mask ={"particles/econ/items/juggernaut/jugg_arcana/juggernaut_arcana_ambient.vpcf"},
    veno_head={"particles/econ/items/venomancer/veno_ti8_immortal_head/veno_ti8_immortal_ambient.vpcf"},
    guns={"particles/econ/items/gyrocopter/hero_gyrocopter_atomic/gyro_atomic_ray_ambient.vpcf"},
    dragon={},
    spectre={},
    spectre_red={},
    dragon_wings={},
    lifestealer_rage={"particles/econ/items/lifestealer/lifestealer_immortal_backbone/lifestealer_immortal_backbone_ambient.vpcf"},
    slardar_back={"particles/econ/items/slardar/slardar_back_ti9/slardar_back_ti9_ambient.vpcf"},
    naga_tail={"particles/econ/items/naga/naga_ti8_immortal_tail/naga_ti8_immortal_ambient.vpcf"},
    pudge_arm={"particles/econ/items/pudge/pudge_immortal_arm/pudge_immortal_arm_ambient.vpcf"},
    pudge_arm_gold={"particles/econ/items/pudge/pudge_immortal_arm/pudge_immortal_arm_ambient_gold.vpcf"},
    furion_back={"particles/econ/items/natures_prophet/natures_prophet_ti9_immortal/natures_prophet_ti9_immortal_back.vpcf"},
    tinker_laser={"particles/econ/items/tinker/tinker_ti10_immortal_laser/tinker_ti10_immortal_ambient.vpcf"},
    treant={"particles/econ/items/treant_protector/ti7_shoulder/treant_ti7_immortal_ambient.vpcf"},
    weaver={"particles/econ/items/weaver/weaver_immortal_ti7/weaver_immortal_ti7_ambient.vpcf"},
    weaver_golden={"particles/econ/items/weaver/weaver_immortal_ti7/weaver_ti7_golden_immortal_ambient.vpcf"},
    winter_2020 ={}
}



Econ.vPetModel ={

  
  baby_roshan_ice="models/courier/baby_rosh/babyroshan_elemental.vmdl",
  platinum_roshan="models/courier/baby_rosh/babyroshan_alt.vmdl",
  baby_roshan_lava="models/courier/baby_rosh/babyroshan_elemental.vmdl",
  baby_roshan_desert_sand="models/courier/baby_rosh/babyroshan.vmdl",
  baby_roshan_gingerbread="models/courier/baby_rosh/babyroshan_winter18.vmdl",
  baby_roshan_golden="models/courier/baby_rosh/babyroshan.vmdl",
  
  baby_roshan_collector2017="models/courier/baby_rosh/babyroshan_alt.vmdl",
  baby_roshan_honey_heist="models/courier/baby_rosh/babyroshan_ti9.vmdl",
  baby_roshan_jade="models/courier/baby_rosh/babyroshan.vmdl",
  baby_roshan="models/courier/baby_rosh/babyroshan.vmdl",
  golden_krobeling="models/items/courier/krobeling_gold/krobeling_gold.vmdl",
  golden_doomling="models/courier/doom_demihero_courier/doom_demihero_courier.vmdl",
  golden_huntling="models/courier/huntling/huntling.vmdl",
  golden_venoling="models/courier/venoling/venoling.vmdl",
  golden_seekling="models/courier/seekling/seekling.vmdl",
  golden_devourling="models/items/courier/devourling/devourling.vmdl",
  golden_greevil="models/courier/greevil/gold_greevil.vmdl",
  gold_dragon="models/courier/baby_winter_wyvern/baby_winter_wyvern.vmdl",
  golden_beetlejaws="models/courier/beetlejaws/mesh/beetlejaws.vmdl",
  golden_flopjaw="models/courier/flopjaw/flopjaw.vmdl",
  
  icewrack_wolf="models/pets/icewrack_wolf/icewrack_wolf.vmdl",
  jadehoof="models/courier/godhorse/godhorse.vmdl",
  pet_spider="models/items/courier/itsy/itsy.vmdl",
  pudgling="models/courier/minipudge/minipudge.vmdl",
  voidling="models/items/courier/faceless_rex/faceless_rex.vmdl",
  lilnova="models/items/courier/lilnova/lilnova.vmdl",
  butch="models/items/courier/butch_pudge_dog/butch_pudge_dog.vmdl",
  almond_the_frondillo="models/pets/armadillo/armadillo.vmdl",
  strongback_the_swift="models/courier/donkey_ti7/donkey_ti7.vmdl",
  scatter_brains="models/items/courier/calabaxa_courier/calabaxa_courier.vmdl",
  
  atrophic_skitterwing="models/items/courier/atrophic_skitterwing/atrophic_skitterwing.vmdl",
  fraidy_jack="models/items/courier/little_fraid_the_courier_of_simons_retribution/little_fraid_the_courier_of_simons_retribution.vmdl",
  spooly="models/items/courier/courier_fall20/courier_fall20.vmdl",
  hollow_jack="models/items/courier/pumpkin_courier/pumpkin_courier.vmdl",
  scuttling_scotty="models/items/courier/scuttling_scotty_penguin/scuttling_scotty_penguin.vmdl",
  serac_the_seal="models/items/courier/frostivus2018_courier_serac_the_seal/frostivus2018_courier_serac_the_seal.vmdl",
  duskie="models/items/courier/duskie/duskie.vmdl",
  wabbit="models/items/courier/wabbit_the_mighty_courier_of_heroes/wabbit_the_mighty_courier_of_heroes.vmdl",
  jade_dragon="models/items/courier/green_jade_dragon/green_jade_dragon.vmdl",
  azuremir="models/items/courier/azuremircourierfinal/azuremircourierfinal_flying.vmdl",
  nian_courier="models/items/courier/nian_courier/nian_courier.vmdl",
  chicken_pet="models/items/courier/mighty_chicken/mighty_chicken.vmdl"
}


Econ.vPetSize ={
  
  baby_roshan_ice=0.8,
  platinum_roshan=0.8,
  baby_roshan_lava=0.8,
  baby_roshan_desert_sand=0.8,
  baby_roshan_gingerbread=0.8,
  baby_roshan_golden=0.8,
  
  baby_roshan_collector2017=0.8,
  baby_roshan_honey_heist=0.8,
  baby_roshan_jade=0.8,
  baby_roshan=0.8,
  golden_krobeling=1.1,
  golden_doomling=1,
  golden_huntling=1,
  golden_venoling=1,
  golden_seekling=1.1,
  golden_devourling=1.1,
  golden_greevil=1.1,
  gold_dragon=1.2,
  golden_beetlejaws=1.25,
  golden_flopjaw=1.5,
  
  icewrack_wolf=1.2,
  jadehoof=0.85,
  pet_spider=0.9,
  pudgling=1,
  voidling=1.1,
  lilnova=1.1,
  butch=1,
  almond_the_frondillo=1,
  strongback_the_swift=0.8,
  scatter_brains=1,
  hallowed_horde=0.7,
  fraidy_jack=1.1,
  spooly=0.8,
  hollow_jack=1.1,
  scuttling_scotty=1.3,
  serac_the_seal=1,
  duskie=1,
  wabbit=1,
  jade_dragon=0.95,
  azuremir=0.9,
  nian_courier=0.9,
  chicken_pet=1,
}


Econ.vPetParticle ={
  baby_roshan_ice={"particles/econ/courier/courier_roshan_frost/courier_roshan_frost_ambient.vpcf"},
  platinum_roshan={"particles/econ/courier/courier_babyrosh_alt_ti8/courier_babyrosh_alt_ti8.vpcf"},
  baby_roshan_lava={"particles/econ/courier/courier_roshan_lava/courier_roshan_lava.vpcf"},
  baby_roshan_desert_sand={"particles/econ/courier/courier_roshan_desert_sands/baby_roshan_desert_sands_ambient.vpcf"},
  baby_roshan_gingerbread={"particles/econ/courier/courier_babyroshan_winter18/courier_babyroshan_winter18_ambient.vpcf"},
  baby_roshan_collector2017={"particles/econ/courier/courier_babyrosh_alt_ti7/courier_babyrosh_alt_ti7.vpcf"},
  baby_roshan_honey_heist={"particles/econ/courier/courier_babyroshan_ti9/courier_babyroshan_ti9_ambient.vpcf"},
  baby_roshan_jade={"particles/econ/courier/courier_roshan_ti8/courier_roshan_ti8.vpcf"},
  golden_krobeling={"particles/econ/courier/courier_krobeling_gold/courier_krobeling_gold_ambient.vpcf"},
  golden_doomling={"particles/econ/courier/courier_golden_doomling/courier_golden_doomling_ambient.vpcf"},
  golden_huntling={"particles/econ/courier/courier_huntling_gold/courier_huntling_gold_ambient.vpcf"},
  golden_venoling={"particles/econ/courier/courier_venoling_gold/courier_venoling_ambient_gold.vpcf"},
  golden_seekling={"particles/econ/courier/courier_seekling_gold/courier_seekling_gold_ambient.vpcf"},
  golden_devourling={"particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf"},
  golden_greevil={"particles/econ/courier/courier_greevil_yellow/courier_greevil_yellow_ambient_3.vpcf"},
  
  gold_dragon={"particles/econ/courier/courier_wyvern_hatchling/courier_wyvern_hatchling_gold.vpcf","particles/econ/courier/courier_wyvern_hatchling/courier_wyvern_hatchling_tail_gold.vpcf"},
  golden_beetlejaws={"particles/econ/courier/courier_beetlejaw/courier_beetlejaw_ambient_gold.vpcf","particles/econ/courier/courier_golden_roshan/golden_roshan_ambient.vpcf"},
  golden_flopjaw={"particles/econ/courier/courier_flopjaw_gold/courier_flopjaw_ambient_gold.vpcf","particles/econ/events/ti10/emblem/ti10_emblem_effect.vpcf"},
  jadehoof={"particles/econ/courier/courier_jadehoof_ambient/jadehoof_ambient.vpcf"},
  strongback_the_swift={"particles/econ/courier/courier_donkey_ti7/courier_donkey_ti7_ambient.vpcf"},
  spooly={"particles/econ/events/diretide_2020/courier_spooky_ambient/courier_spooky_ambient.vpcf"},
  wabbit={"particles/econ/courier/courier_wabbit/courier_wabbit_ambient_lvl1.vpcf"},
  nian_courier={"particles/econ/courier/courier_nian/courier_nian_ambient.vpcf"},
}



Econ.vPetMaterialGroup ={
  baby_roshan_ice="2",
  platinum_roshan="2",
  baby_roshan_lava="1",
  baby_roshan_desert_sand="4",
  baby_roshan_golden="1",
  baby_roshan_collector2017="1",
  baby_roshan_jade="5",
  baby_roshan="0",
  golden_doomling="1",
  golden_huntling="1",
  golden_venoling="1",
  golden_seekling="1",
  golden_devourling="1",
  gold_dragon="2",
  golden_beetlejaws="1",
  golden_flopjaw="1",
  jadehoof="1",
  pudgling="1",
  almond_the_frondillo="1",
  wabbit="0",
}



function Econ:Init()

    LinkLuaModifier( "modifier_cosmetic_pet", "creature_ability/modifier/modifier_cosmetic_pet", LUA_MODIFIER_MOTION_NONE )
    LinkLuaModifier( "modifier_cosmetic_pet_invisible", "creature_ability/modifier/modifier_cosmetic_pet_invisible", LUA_MODIFIER_MOTION_NONE )
    LinkLuaModifier( "modifier_dummy_cosmetic_caster", "creature_ability/modifier/modifier_dummy_cosmetic_caster", LUA_MODIFIER_MOTION_NONE )

    CustomGameEventManager:RegisterListener("ChangeEquip",function(_, keys)
        self:ChangeEquip(keys)
    end)
    
    CustomGameEventManager:RegisterListener("DrawLottery",function(_, keys)
        self:DrawLottery(keys)
    end)

    CustomGameEventManager:RegisterListener("EconDataRefresh",function(_, keys)
        self:EconDataRefresh(keys)
    end)

    CustomGameEventManager:RegisterListener("SubmitTaobaoCode",function(_, keys)
        self:SubmitTaobaoCode(keys)
    end)

    CustomGameEventManager:RegisterListener("ActiveChatWheel",function(_, keys)
        self:ActiveChatWheel(keys)
    end)

    CustomGameEventManager:RegisterListener("ActiveTaunt",function(_, keys)
        self:ActiveTaunt(keys)
    end)

    CustomGameEventManager:RegisterListener("BuyItemWithFragment",function(_, keys)
        self:BuyItemWithFragment(keys)
    end)

    Econ.vPlayerData={}
    
    Timers:CreateTimer(function()
      
      local flNow = GameRules:GetDOTATime( false, false )

      for i=0,30 do
        if PlayerResource:GetSelectedHeroEntity(i) then
           local hHero = PlayerResource:GetSelectedHeroEntity(i)
           local hPet = hHero.hPet
           if hPet and not hPet:IsNull() then
             local vHeroPosition = hHero:GetAbsOrigin()
             local vPetPosition = hPet:GetAbsOrigin()
             local flDistance = ( vHeroPosition - vPetPosition ):Length2D()
             local vHeroForward = hHero:GetForwardVector()
             local vForward = vHeroForward * RandomInt( 110, 140 )

             if hHero:IsInvisible() and not hPet:HasModifier( "modifier_cosmetic_pet_invisible" ) then
                hPet:AddNewModifier( hPet, nil, "modifier_cosmetic_pet_invisible", {} )
             elseif not hHero:IsInvisible() and hPet:HasModifier( "modifier_cosmetic_pet_invisible" ) then
                hPet:RemoveModifierByName( "modifier_cosmetic_pet_invisible" )
             end

             local flEnemyDistance
             local hNearEnemy = FindUnitsInRadius(
                hHero:GetTeam(),
                hPet:GetAbsOrigin(),
                nil,
                300,
                DOTA_UNIT_TARGET_TEAM_ENEMY,
                DOTA_UNIT_TARGET_HERO + DOTA_UNIT_TARGET_CREEP,
                DOTA_UNIT_TARGET_FLAG_NO_INVIS,
                FIND_CLOSEST,
                false
              )[1]
              
              
              if hNearEnemy then
                flEnemyDistance = ( hNearEnemy:GetAbsOrigin() - vPetPosition ):Length2D()
                if flEnemyDistance < 70 then
                  Econ:HidePet( hPet, 3 )
                end
              end
              
              
              if hPet.bIsHidden and hPet.flUnhideTime <= flNow then
                  Econ:UnhidePet( hPet )
              end

              if flDistance > 900 then

                Econ:HidePet( hPet, 0.35 )

                local a = RandomInt( 60, 120 )

                if RandomInt( 1, 2 ) == 1 then
                  a = a * -1
                end

                local r = RotatePosition( Vector( 0, 0, 0 ), QAngle( 0, a, 0 ), vForward )

                hPet:SetAbsOrigin( vHeroPosition + r )
                hPet:SetForwardVector( vHeroForward )
                FindClearSpaceForUnit( hPet, vHeroPosition + r, true )

              elseif flDistance > 150 then
                local vRight = RotatePosition( Vector( 0, 0, 0 ), QAngle( 0, RandomInt( 70, 110 ) * -1, 0 ), vForward ) + vHeroPosition
                local vLeft = RotatePosition( Vector( 0, 0, 0 ), QAngle( 0, RandomInt( 70, 110 ), 0 ), vForward ) + vHeroPosition

                if flEnemyDistance and flEnemyDistance < 300 and flDistance < 400 then
                  hPet:Stop()
                else
                  if ( vPetPosition - vRight ):Length2D() > ( vPetPosition - vLeft ):Length2D() then
                    hPet:MoveToPosition( vLeft )
                  else
                    hPet:MoveToPosition( vRight )
                  end
                end
              elseif flDistance < 90 then
                hPet:MoveToPosition( vHeroPosition + ( vPetPosition - vHeroPosition ):Normalized() * RandomInt( 110, 140 ) )
              elseif hNearEnemy and ( hNearEnemy:GetAbsOrigin() - vPetPosition ):Length2D() < 110 then
                hPet:MoveToPosition( vPetPosition + ( vPetPosition - hNearEnemy:GetAbsOrigin() ):Normalized() * RandomInt( 100, 150 ) )
              end
            end 
         end
      end 
      return 0.4
    end)

end

function Econ:DrawLottery(keys)
    local nPlayerID = keys.playerId
    local nCurrentIndex = keys.currentIndex
end



function Econ:SubmitTaobaoCode(keys)
end


function Econ:EconDataRefresh(keys)
    
    local nPlayerID = keys.playerId
    local sPlayerSteamId = PlayerResource:GetSteamAccountID(nPlayerID)
    
    CustomNetTables:SetTableValue("econ_data", "money_"..sPlayerSteamId,{money=keys.moneyValue,fragment=keys.fragmentValue})
    Econ:SetEconNetTable(keys.econData,sPlayerSteamId)
   
end




function Econ:ChangeEquip(keys)

    local nPlayerID = keys.playerId

    if Econ.vPlayerData[nPlayerID] ==nil then
       Econ.vPlayerData[nPlayerID] = {}
    end
    
    
    if keys.type=="Particle" then

        local vCurrentEconParticleIndexs=Econ.vPlayerData[nPlayerID].vCurrentEconParticleIndexs
        
        
        if vCurrentEconParticleIndexs then
            for _,nParticleIndex in pairs(vCurrentEconParticleIndexs) do
                ParticleManager:DestroyParticle(nParticleIndex, true)
                ParticleManager:ReleaseParticleIndex(nParticleIndex)
            end
        end

        Econ.vPlayerData[nPlayerID].vCurrentEconParticleIndexs=nil
        Econ.vPlayerData[nPlayerID].sCurrentParticleEconItemName=nil

        if keys.isEquip==1 then           
            self:EquipParticleEcon(keys.itemName,nPlayerID)
        end

    end
    
    
    if keys.type=="KillEffect" then
        Econ.vPlayerData[nPlayerID].sCurrentKillEffect = nil
        Econ.vPlayerData[nPlayerID].sCurrentKillEffectItem = nil
        if keys.isEquip==1 then
           Econ:EquipKillEffectEcon(keys.itemName,nPlayerID)
        end
        
        if keys.isEquip==0 or (not string.find(keys.itemName, "_spray")) then
           local hPlayer = PlayerResource:GetPlayer(nPlayerID)
           if hPlayer then
             CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticSpray", {})
           end
        end
    end

    
    if keys.type=="KillSound" then
        Econ.vPlayerData[nPlayerID].sCurrentKillSound = nil
        Econ.vPlayerData[nPlayerID].sCurrentKillSoundItem = nil
        if keys.isEquip==1 then
           Econ:EquipKillSoundEcon(keys.itemName,nPlayerID)
        end
    end

    
    if keys.type=="Barrage" then
        CustomNetTables:SetTableValue("econ_data", tostring(nPlayerID), {})
        if keys.isEquip==1 then
            Econ:EquipBarrageEcon(keys.itemName,nPlayerID)
        end
    end

    
    if keys.type=="BlinkEffect" then
         Econ.vPlayerData[nPlayerID].sCurrentStartBlinkEffect=nil
         Econ.vPlayerData[nPlayerID].sCurrentEndBlinkEffect=nil
        if keys.isEquip==1 then
            Econ:EquipBlinkEffectEcon(keys.itemName,nPlayerID)
        end
    end

    
    if keys.type=="AttackEffect" then
        if keys.isEquip==1 then
            local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
            if hHero then
                if hHero.sOriginalRangedProjectileName==nil then
                  hHero.sOriginalRangedProjectileName = hHero:GetRangedProjectileName()
                end
                hHero:SetRangedProjectileName(Econ.vAttackEffectMap[keys.itemName])
            end
        else
            local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
            if hHero and hHero.sOriginalRangedProjectileName then
                hHero:SetRangedProjectileName(hHero.sOriginalRangedProjectileName)
            end
        end
    end

    
    if keys.type=="Wearable" then

       if keys.isEquip==0 then
          if Econ.vPlayerData[nPlayerID][keys.itemName] then
             
             if Econ.vPlayerData[nPlayerID][keys.itemName].vCurrentEconParticleIndexs then
                local vCurrentEconParticleIndexs = Econ.vPlayerData[nPlayerID][keys.itemName].vCurrentEconParticleIndexs
                for _,nParticleIndex in pairs(vCurrentEconParticleIndexs) do
                    ParticleManager:DestroyParticle(nParticleIndex, true)
                    ParticleManager:ReleaseParticleIndex(nParticleIndex)
                end
                Econ.vPlayerData[nPlayerID][keys.itemName].vCurrentEconParticleIndexs =nil
             end 
             
             if Econ.vPlayerData[nPlayerID][keys.itemName].hProp then
                UTIL_Remove(Econ.vPlayerData[nPlayerID][keys.itemName].hProp)
                Econ.vPlayerData[nPlayerID][keys.itemName].hProp=nil
             end
          end
       end 

       if keys.isEquip==1 then        
          self:EquipWearableEcon(keys.itemName,nPlayerID)
       end

    end

        
    if keys.type=="Pet" then

       local hHero = PlayerResource:GetPlayer( nPlayerID ):GetAssignedHero()
       if not hHero then
           return
       end 
       local vOldPetOrigin
       local vOldPetForward
       
       if hHero.hPet and not hHero.hPet:IsNull() then
           vOldPetOrigin =  hHero.hPet:GetAbsOrigin()
           vOldPetForward =  hHero.hPet:GetForwardVector()
           hHero.hPet:AddNoDraw()
           hHero.hPet:Destroy()
       end

       if keys.isEquip==1 then        
          self:EquipPetEcon(keys.itemName,nPlayerID,vOldPetOrigin,vOldPetForward)
       end
       
    end


    if keys.type=="CosmeticsAbility" then
        Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbility = nil
        Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbilityItem = nil
        if keys.isEquip==1 then
           Econ:EquipCosmeticsAbilityEcon(keys.itemName,nPlayerID)
        end
        
        if keys.isEquip==0 then
           local hPlayer = PlayerResource:GetPlayer(nPlayerID)
           if hPlayer then
             CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticAbility", {})
           end
        end
    end
    
    
    if keys.type~="Wearable" then
    end

end


function Econ:EquipWearableEcon(sItemName,nPlayerID)

    if PlayerResource:GetPlayer(nPlayerID) then
        local hHero = PlayerResource:GetPlayer(nPlayerID):GetAssignedHero()
        local vCurrentEconParticleIndexs={}
        Econ.vPlayerData[nPlayerID][sItemName]={}
        
        local hProp = SpawnEntityFromTableSynchronous("prop_dynamic", {model = Econ.vWearableMap[sItemName], DefaultAnim=Econ.vWearableAnimation[sItemName], targetname=DoUniqueString("prop_dynamic")})
        hProp:FollowEntity(hHero, true)
        if "pudge_arm_gold"==sItemName then
           hProp:SetSkin(1)
        end
        if "spectre_red"==sItemName then
           hProp:SetSkin(1)
        end

        if "skywrath_wings_golden"==sItemName then
           hProp:SetSkin(1)
        end
        if "skywrath_wings_red"==sItemName then
           hProp:SetSkin(2)
        end

        Econ.vPlayerData[nPlayerID][sItemName].hProp = hProp
        for _,sParticle in pairs(Econ.vWearableParticle[sItemName]) do

            local hAttachment=hProp
            if sItemName=="shadow_fiend_wings" then
               hAttachment= hHero
            end

            if hAttachment then
                local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
                local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hAttachment)
                Econ:SetControllPoints(nParticleIndex,sItemName,hAttachment)
                table.insert(vCurrentEconParticleIndexs,nParticleIndex)
            end
        end
        Econ.vPlayerData[nPlayerID][sItemName].vCurrentEconParticleIndexs=vCurrentEconParticleIndexs
    end

end

function Econ:EquipParticleEcon(sItemName,nPlayerID)

    if PlayerResource:GetPlayer(nPlayerID) then

        local hHero = PlayerResource:GetPlayer(nPlayerID):GetAssignedHero()
        local vCurrentEconParticleIndexs={}

        for _,sParticle in pairs(Econ.vParticleMap[sItemName]) do
            if hHero then
                local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
                local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hHero)
                ParticleManager:SetParticleControlEnt(nParticleIndex,0,hHero,nParticleAttach,"follow_origin",hHero:GetAbsOrigin(),true)
                Econ:SetControllPoints(nParticleIndex,sItemName,hHero)
                table.insert(vCurrentEconParticleIndexs,nParticleIndex)
            end
        end
        
        Econ:RepeatPlay(sItemName,nPlayerID)

        Econ.vPlayerData[nPlayerID].sCurrentParticleEconItemName=sItemName
        Econ.vPlayerData[nPlayerID].vCurrentEconParticleIndexs=vCurrentEconParticleIndexs
    end

end


function Econ:EquipIllusionParticle(sItemName,hIllusion)

    if hIllusion then
        for _,sParticle in pairs(self.vParticleMap[sItemName]) do
            if hIllusion then
                local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
                local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hIllusion)
                ParticleManager:SetParticleControlEnt(nParticleIndex,0,hIllusion,nParticleAttach,"follow_origin",hIllusion:GetAbsOrigin(),true)
                Econ:SetControllPoints(nParticleIndex,sItemName)
            end
        end
        
        Econ:RepeatPlayIllusion(sItemName,hIllusion)
    end

end


function Econ:RepeatPlayIllusion(sItemName,hIllusion)
        
        local flInterval
        
        
        if sItemName=="rainbow_tail" then
            flInterval = 5
        end
        if sItemName=="shallow_grave" then
            flInterval = 5
        end
        if sItemName=="butterfly" then
            flInterval = 2
        end
        if sItemName=="death_finger" then
            flInterval = 2
        end
        if sItemName=="shrine_active" then
            flInterval = 5
        end
        if sItemName=="slumber" then
            flInterval = 30
        end
        
        if flInterval==nil then
            return
        end


        Timers:CreateTimer(flInterval, function()
          
          if (not hIllusion) or (not hIllusion:IsAlive()) then
              return nil
          end

          for _,sParticle in pairs(self.vParticleMap[sItemName]) do
             if hIllusion then
                local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
                local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hIllusion)
                ParticleManager:SetParticleControlEnt(nParticleIndex,0,hIllusion,nParticleAttach,"follow_origin",hIllusion:GetAbsOrigin(),true)
                Econ:SetControllPoints(nParticleIndex,sItemName)
             end
          end
          return flInterval
        end)

end






function Econ:RepeatPlay(sItemName,nPlayerID)
        
        local flInterval
        
        
        if sItemName=="rainbow_tail" then
            flInterval = 5
        end
        if sItemName=="shallow_grave" then
            flInterval = 5
        end
        if sItemName=="butterfly" then
            flInterval = 2
        end
        if sItemName=="death_finger" then
            flInterval = 2
        end
        if sItemName=="shrine_active" then
            flInterval = 5
        end
        

        if flInterval==nil then
            return
        end


        Timers:CreateTimer(flInterval, function()
          local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
          
          
          if Econ.vPlayerData[nPlayerID].sCurrentParticleEconItemName~=sItemName then
              return nil
          end

          for _,nOldParticleIndex in ipairs(Econ.vPlayerData[nPlayerID].vCurrentEconParticleIndexs) do
              ParticleManager:DestroyParticle(nOldParticleIndex, false)
              ParticleManager:ReleaseParticleIndex(nOldParticleIndex)
          end

          local vCurrentEconParticleIndexs={}
          for _,sParticle in pairs(self.vParticleMap[sItemName]) do
             if hHero then
                local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
                local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hHero)
                ParticleManager:SetParticleControlEnt(nParticleIndex,0,hHero,nParticleAttach,"follow_origin",hHero:GetAbsOrigin(),true)
                Econ:SetControllPoints(nParticleIndex,sItemName)
                table.insert(vCurrentEconParticleIndexs,nParticleIndex)
             end
          end
          Econ.vPlayerData[nPlayerID].vCurrentEconParticleIndexs=vCurrentEconParticleIndexs
          return flInterval
        end)

end






function Econ:ChooseParticleAttach(sItemName)
    if  sItemName == "rich" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "wudizhansha" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "miedi" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "douyu_1" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "douyu_2" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "douyu_3" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "rainbow" then
        return PATTACH_ABSORIGIN
    end
    if  sItemName == "legend_three_star_chess" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "epic_three_star_chess" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "rare_three_star_chess" then
        return PATTACH_OVERHEAD_FOLLOW
    end

    if  sItemName == "douyu_new_1" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "douyu_new_2" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "douyu_new_3" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    if  sItemName == "season_2020_5" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    
    if  sItemName == "season_2020_8" then
        return PATTACH_OVERHEAD_FOLLOW
    end

    if  sItemName == "season_2020_8" then
        return PATTACH_OVERHEAD_FOLLOW
    end

    if  sItemName == "terror_wings" then
        return PATTACH_ABSORIGIN
    end

   if  sItemName == "thunder_strike" then
        return PATTACH_OVERHEAD_FOLLOW
    end

    if  sItemName == "guns" then
        return PATTACH_CUSTOMORIGIN
    end

    if  sItemName == "season_2020_12" then
        return PATTACH_OVERHEAD_FOLLOW
    end

    if  sItemName == "season_2020_12" then
        return PATTACH_OVERHEAD_FOLLOW
    end
    
    if string.find(sItemName, "_spray") then
       return PATTACH_WORLDORIGIN
    end

    return PATTACH_ABSORIGIN_FOLLOW
end



function Econ:SetControllPoints(nParticleIndex,sItemName,hEntity)
    if  sItemName == "ethereal_flame_white" then
        ParticleManager:SetParticleControl(nParticleIndex, 15, Vector(200, 200, 200))
        ParticleManager:SetParticleControl(nParticleIndex, 2, Vector(255, 255, 255))
        ParticleManager:SetParticleControl(nParticleIndex, 16, Vector(1, 0, 0))
    end
    if  sItemName == "ethereal_flame_golden" then
        ParticleManager:SetParticleControl(nParticleIndex, 15, Vector(217, 191, 89))
        ParticleManager:SetParticleControl(nParticleIndex, 2, Vector(255, 255, 255))
        ParticleManager:SetParticleControl(nParticleIndex, 16, Vector(1, 0, 0))
    end
    if  sItemName == "ethereal_flame_pink" then
        ParticleManager:SetParticleControl(nParticleIndex, 15, Vector(210, 0, 210))
        ParticleManager:SetParticleControl(nParticleIndex, 2, Vector(255, 255, 255))
        ParticleManager:SetParticleControl(nParticleIndex, 16, Vector(1, 0, 0))
    end
    if sItemName == "terror_wings" then
       if hEntity then
         ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_l', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 2, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_r', hEntity:GetAbsOrigin(), true)
       end
    end
    if  sItemName == "rainbow" then
        if hEntity then
           ParticleManager:SetParticleControl(nParticleIndex, 2, hEntity:GetAbsOrigin()+Vector(0,0,175))
        end
    end
    if sItemName == "guns" then
       if hEntity then
         ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_POINT_FOLLOW, 'attach_attack1', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_POINT_FOLLOW, 'attach_attack2', hEntity:GetAbsOrigin(), true)
       end
    end
    if sItemName == "sf_wings" then
       if hEntity then
         ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_R0', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 2, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_R1', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 3, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_R2', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 4, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_L0', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 5, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_L1', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 6, hEntity, PATTACH_POINT_FOLLOW, 'attach_wing_L2', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 7, hEntity, PATTACH_POINT_FOLLOW, 'attach_head', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'parent', hEntity:GetAbsOrigin(), true)
       end
    end
    if sItemName == "veno_head" then
       if hEntity then
         ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'self', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_POINT_FOLLOW, 'attach_feather_mid', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 2, hEntity, PATTACH_POINT_FOLLOW, 'attach_feather_l', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 3, hEntity, PATTACH_POINT_FOLLOW, 'attach_feather_r', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 4, hEntity, PATTACH_POINT_FOLLOW, 'attach_feather_back', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 5, hEntity, PATTACH_WORLDORIGIN, 'self', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 6, hEntity, PATTACH_WORLDORIGIN, 'self', hEntity:GetAbsOrigin(), true)
       end
    end
    if sItemName == "naga_tail" then
       if hEntity then
         ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'attach_fin_l', hEntity:GetAbsOrigin(), true)
         ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_POINT_FOLLOW, 'attach_fin_r', hEntity:GetAbsOrigin(), true)
       end
    end
    if sItemName == "death_finger" then
         ParticleManager:SetParticleControl(nParticleIndex, 1, Vector(1, 0, 0))
    end

    if sItemName == "nightstalker_gold" or sItemName == "nightstalker_black" then
        if hEntity then
           ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'follow_origin', hEntity:GetAbsOrigin(), true)
           ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'follow_origin', hEntity:GetAbsOrigin(), true)
           ParticleManager:SetParticleControl(nParticleIndex, 2, Vector(150, 0, 0))
        end
    end

    if sItemName == "golden_fish" or sItemName == "fish" then
        if hEntity then
           ParticleManager:SetParticleControlEnt(nParticleIndex, 0, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'follow_origin', hEntity:GetAbsOrigin(), true)
           ParticleManager:SetParticleControlEnt(nParticleIndex, 1, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'follow_origin', hEntity:GetAbsOrigin(), true)
           ParticleManager:SetParticleControlEnt(nParticleIndex, 3, hEntity, PATTACH_ABSORIGIN_FOLLOW, 'follow_origin', hEntity:GetAbsOrigin(), true)
        end
    end
    
    if string.find(sItemName, "_spray") then
       if hEntity then
           
           
           local nEffectParitcle = ParticleManager:CreateParticle("particles/sprays/spray_placement.vpcf",PATTACH_WORLDORIGIN,nil)
           ParticleManager:SetParticleControl( nEffectParitcle, 0, hEntity:GetAbsOrigin() )

           ParticleManager:SetParticleControl( nParticleIndex, 0, hEntity:GetAbsOrigin() )
           ParticleManager:SetParticleControl( nParticleIndex, 1, Vector( 196, 99999, 0 ) )
           EmitSoundOnLocationWithCaster( hEntity:GetAbsOrigin(), "Spraywheel.Paint", hEntity )
       end
    end

end


function Econ:StopLoopingSound(sItemName)
    
    if sItemName == "ceb" then
       Timers:CreateTimer(3, function()
         StopGlobalSound("soundboard.ceb.start")
         EmitGlobalSound("soundboard.ceb.stop")
         end
       )
    end
    
end



function Econ:EquipCosmeticsAbilityEcon(sItemName,nPlayerID)
    Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbility=Econ.vCosmeticsAbilityMap[sItemName]
    Econ:CreateCosmeticsDummy(nPlayerID)
    Econ:AddCosmeticDummyAbility(nPlayerID,Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbility)
    Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbilityItem=sItemName
    
    local hPlayer = PlayerResource:GetPlayer(nPlayerID)
    if hPlayer then
        CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticAbility", {ability_name = Econ.vPlayerData[nPlayerID].sCurrentCosmeticsAbility})
    end

end


function Econ:EquipKillEffectEcon(sItemName,nPlayerID)
    Econ.vPlayerData[nPlayerID].sCurrentKillEffect=Econ.vKillEffectMap[sItemName]
    Econ.vPlayerData[nPlayerID].sCurrentKillEffectItem=sItemName
    
    
    if string.find(sItemName, "_spray") then
        local hPlayer = PlayerResource:GetPlayer(nPlayerID)
        if hPlayer then
            CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticSpray", {item_name=sItemName})
        end
    end

end

 
function Econ:CreateCosmeticsDummy(nPlayerID)

   local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
   if not hHero then
      return
   end

   if Econ.vPlayerData[nPlayerID].hDummy ==nil then
      local hDummy = CreateUnitByName("npc_dummy_cosmetic_caster", hHero:GetAbsOrigin(), true, hHero, hHero, hHero:GetTeam())
      hHero.hCosmeticsAbilityDummy = hDummy
      hDummy:SetControllableByPlayer(nPlayerID, true)
      hDummy:SetOwner(hHero)
      local hPlayer = PlayerResource:GetPlayer(nPlayerID)
      if hPlayer then
        CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticsDummyIndex", {entity_index = hDummy:GetEntityIndex()})
      end
      hDummy:AddNewModifier(hDummy, nil, "modifier_dummy_cosmetic_caster", {})
      
      Timers:CreateTimer(0.5, function()
         local hNowHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
         if not hDummy or hDummy:IsNull() then
           return nil
         end
         hDummy:SetAbsOrigin(hNowHero:GetAbsOrigin())
         hDummy:SetForwardVector(hNowHero:GetForwardVector())
         return 0.5
      end)

      hDummy:RemoveNoDraw()
      Econ.vPlayerData[nPlayerID].hDummy = hDummy 
   else
      local hPlayer = PlayerResource:GetPlayer(nPlayerID)
      if hPlayer and Econ.vPlayerData[nPlayerID] and Econ.vPlayerData[nPlayerID].hDummy and not Econ.vPlayerData[nPlayerID].hDummy:IsNull() then
         CustomGameEventManager:Send_ServerToPlayer(hPlayer, "UpdateCosmeticsDummyIndex", {entity_index = Econ.vPlayerData[nPlayerID].hDummy:GetEntityIndex()})
      end
   end


end


 
function Econ:AddCosmeticDummyAbility(nPlayerID,sAbilityName)
    
    if Econ.vPlayerData[nPlayerID].hDummy and not Econ.vPlayerData[nPlayerID].hDummy:IsNull() then
        if not Econ.vPlayerData[nPlayerID].hDummy:FindAbilityByName(sAbilityName) then
            local hAbility = Econ.vPlayerData[nPlayerID].hDummy:AddAbility(sAbilityName)
            hAbility:SetLevel(1)
            hAbility:SetHidden(false)
            hAbility.bCosmeticAbility = true
        end
    end

end



function Econ:PlayKillEffect(hHero)
    
    local nPlayerID = hHero:GetPlayerID()

    if Econ.vPlayerData[nPlayerID] and Econ.vPlayerData[nPlayerID].sCurrentKillEffect and Econ.vPlayerData[nPlayerID].sCurrentKillEffectItem then

        local sParticle = Econ.vPlayerData[nPlayerID].sCurrentKillEffect
        local nParticleAttach = Econ:ChooseParticleAttach(Econ.vPlayerData[nPlayerID].sCurrentKillEffectItem)
        local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hHero)

        Econ:SetControllPoints(nParticleIndex,Econ.vPlayerData[nPlayerID].sCurrentKillEffectItem,hHero)
        ParticleManager:SetParticleControlEnt(nParticleIndex,0,hHero,nParticleAttach,"follow_origin",hHero:GetAbsOrigin(),true)
        
        
        if Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex then
            ParticleManager:DestroyParticle( Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex, true )
            ParticleManager:ReleaseParticleIndex( Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex )
        end
        Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex = nParticleIndex
    end

end


function Econ:EquipKillSoundEcon(sItemName,nPlayerID)
    
    Econ.vPlayerData[nPlayerID].sCurrentKillSound=Econ.vKillSoundMap[sItemName]
    Econ.vPlayerData[nPlayerID].sCurrentKillSoundItem=sItemName

end

function Econ:EquipBarrageEcon(sItemName,nPlayerID)
    CustomNetTables:SetTableValue("econ_data", tostring(nPlayerID), {itemName=sItemName})
end


function Econ:EquipBlinkEffectEcon(sItemName,nPlayerID)
    
    Econ.vPlayerData[nPlayerID].sCurrentStartBlinkEffect=Econ.vStartBlinkEffectMap[sItemName]
    Econ.vPlayerData[nPlayerID].sCurrentEndBlinkEffect=Econ.vEndBlinkEffectMap[sItemName]
    Econ.vPlayerData[nPlayerID].sCurrentBlinkEffectItem=sItemName

end


function Econ:PlayKillSound(hHero)
    
    local nPlayerID = hHero:GetPlayerID()
    if Econ.vPlayerData[nPlayerID] and Econ.vPlayerData[nPlayerID].sCurrentKillSound and Econ.vPlayerData[nPlayerID].sCurrentKillSoundItem then
        local sSound = Econ.vPlayerData[nPlayerID].sCurrentKillSound
        local vData={}
        vData.type = "chat_wheel"
        vData.playerId = nPlayerID
        vData.itemName =Econ.vPlayerData[nPlayerID].sCurrentKillSoundItem
        Barrage:FireBullet(vData)
        EmitGlobalSound(sSound)
        Econ:StopLoopingSound(Econ.vPlayerData[nPlayerID].sCurrentKillSoundItem)
    else
        EmitSoundOn("Hero_LegionCommander.Duel.Victory", hHero)
    end

end


function Econ:ActiveChatWheel(keys)
    
    local nPlayerID = keys.playerId
    local sItemName = keys.itemName
    local sSound = Econ.vKillSoundMap[sItemName]
    EmitGlobalSound(sSound)
    Econ:StopLoopingSound(sItemName)

    local vData={}
    vData.type = "chat_wheel"
    vData.playerId = nPlayerID
    vData.itemName =sItemName
    Barrage:FireBullet(vData)
end

function Econ:ActiveTaunt(keys)
    
    local nPlayerID = keys.playerId
    local sItemName = keys.itemName
    local sParticle = Econ.vKillEffectMap[sItemName]
    local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
    if hHero then
       if Econ.vKillEffectMap[sItemName] then

           local nParticleAttach = Econ:ChooseParticleAttach(sItemName)
           local nParticleIndex = ParticleManager:CreateParticle(sParticle,nParticleAttach,hHero)
           ParticleManager:SetParticleControlEnt(nParticleIndex,0,hHero,nParticleAttach,"follow_origin",hHero:GetAbsOrigin(),true)
           Econ:SetControllPoints(nParticleIndex,sItemName,hHero)
        
           
           if Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex then
                ParticleManager:DestroyParticle( Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex, true )
                ParticleManager:ReleaseParticleIndex( Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex )
           end
           Econ.vPlayerData[nPlayerID].nOldKillEffectParticleIndex = nParticleIndex
       end
    end
end


function Econ:BuyItemWithFragment(keys)

end


function Econ:EquipPetEcon(sItemName,nPlayerID,vOldPetOrigin,vOldPetForward)
    
    local hHero = PlayerResource:GetSelectedHeroEntity(nPlayerID)
    if not hHero then
       return
    end 

    if not Econ.vPetModel[sItemName] then
      return
    end
    
    local hPet = CreateUnitByName( "npc_cosmetic_pet", vOldPetOrigin or hHero:GetAbsOrigin() + RandomVector( RandomInt( 75, 150 ) ), true, hHero, hHero, hHero:GetTeam() )

    hPet:SetForwardVector( vOldPetForward or hHero:GetAbsOrigin() )
    hPet:AddNewModifier( hPet, nil, "modifier_cosmetic_pet", {} )
    Econ:UnhidePet( hPet )

    hPet:SetModel(Econ.vPetModel[sItemName])
    hPet:SetOriginalModel(Econ.vPetModel[sItemName])

    if Econ.vPetMaterialGroup[sItemName] then
      hPet:SetMaterialGroup( tostring( Econ.vPetMaterialGroup[sItemName] ) )
    end
    
    if Econ.vPetSize[sItemName] then
       hPet:SetModelScale(Econ.vPetSize[sItemName])
    end
    if Econ.vPetParticle [sItemName] then
        for _, sParticle in pairs(Econ.vPetParticle [sItemName]) do
            local nParticleAttach = PATTACH_RENDERORIGIN_FOLLOW
            if sParticle=="particles/econ/courier/courier_wyvern_hatchling/courier_wyvern_hatchling_tail_gold.vpcf" then
                nParticleAttach = PATTACH_POINT_FOLLOW
            end
            local nParticle = ParticleManager:CreateParticle(sParticle, nParticleAttach, hPet )

            if sParticle=="particles/econ/courier/courier_wyvern_hatchling/courier_wyvern_hatchling_tail_gold.vpcf" then
                ParticleManager:SetParticleControlEnt( nParticle, 0, hPet, PATTACH_ROOTBONE_FOLLOW, "attach_fx", hPet:GetAbsOrigin(), true )
            end
        end
    end
    hHero.hPet = hPet 
end


function Econ:HidePet( hPet, flDuration )
  
  if hPet.flUnhideTime then
     if hPet.flUnhideTime < GameRules:GetDOTATime( false, false ) + flDuration then
       hPet.flUnhideTime = GameRules:GetDOTATime( false, false ) + flDuration
     end
  else
     hPet.flUnhideTime = GameRules:GetDOTATime( false, false ) + flDuration
  end
  
  if hPet.bIsHidden == true then
     return 
  end

  hPet:AddNoDraw()
  hPet.bIsHidden = true

  local nParticle = ParticleManager:CreateParticle( "particles/units/heroes/hero_monkey_king/monkey_king_disguise_smoke_top.vpcf", PATTACH_WORLDORIGIN, nil )
  ParticleManager:SetParticleControl( nParticle, 0, hPet:GetAbsOrigin() )
  ParticleManager:ReleaseParticleIndex( nParticle )
end

function Econ:UnhidePet( hPet )

  hPet:RemoveNoDraw()
  hPet.bIsHidden = false

  local nParticle = ParticleManager:CreateParticle( "particles/units/heroes/hero_monkey_king/monkey_king_disguise_smoke_top.vpcf", PATTACH_WORLDORIGIN, nil )
  ParticleManager:SetParticleControl( nParticle, 0, hPet:GetAbsOrigin() )
  ParticleManager:ReleaseParticleIndex( nParticle )
end



function Econ:SetEconNetTable(data,sSteamID)

    local nIndex = 0
    local bucketData = {}
    
    if data==nil then
       return;
    end

    for _,v in pairs(data) do
      nIndex = nIndex + 1
      local nBucketNumber = math.ceil(nIndex/100)
      if bucketData[nBucketNumber] == nil then 
         bucketData[nBucketNumber] = {}
      end
      table.insert(bucketData[nBucketNumber], v)
    end

    local nTotalBucketNumber = math.ceil(nIndex/100)
    for i=1,nTotalBucketNumber do
        CustomNetTables:SetTableValue("econ_data", "econ_info_"..sSteamID.."_"..i, bucketData[i])
    end
    
    CustomNetTables:SetTableValue("econ_data", "econ_total_bucket_"..sSteamID, {total_bucket=nTotalBucketNumber})

end
